count: <%= @flights.count %>
<table class="table table-striped">
<% @flights.each do |flight|  %>

	<tr>
		<td><%= airline_logo_for flight.airline_code %></td>
		<td><%= flight.flight_number %></td>
		<td><%= flight.departure_time.to_datetime.strftime("%H:%M") %></td>
		<td><%= flight.airplane_type %></td>
		<td>
		<table>
			<% flights_query = flight.flight_prices.select("DISTINCT ON (supplier) *").order("supplier,updated_at") %>
			<% flights_query.to_a.sort_by(&:price).each_with_index do |ticket,index| %>
				<tr class="<%='best-price' if index==0 %>" >
					<td><%= ticket.nil? ? "-" : ticket.supplier %></td>
					<td><%= ticket.nil? ? "-" : number_with_delimiter(ticket.price) %></td>
				</tr>
			<% end %>
		</table>
		</td>
	</tr>
<% end %>
</table>

